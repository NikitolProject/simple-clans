# SimpleClans

Простой плагин для управления кланами на вашем сервере Paper/Purpur.

## Возможности

- **Создание и управление кланами**: Игроки с определенными правами могут создавать и распускать кланы.
- **Система приглашений**: Удобная система приглашений с кликабельными кнопками **[Принять]** и **[Отклонить]**, чтобы избежать путаницы.
- **Клановый чат**: Изолированный чат для членов клана с возможностью переключения режима (`/clan chat on/off`).
- **Гибкая система прав**: Плагин использует стандартные права доступа (permissions), что позволяет администраторам гибко настраивать, кто может создавать кланы.
- **Поддержка оффлайн-игроков**: Возможность просматривать список участников клана и исключать их, даже если они не в сети.
- **Защита от Friendly Fire**: Настраиваемая в конфигурации защита от нанесения урона членам своего клана.
- **Поддержка PlaceholderAPI**: Готовый плейсхолдер `%clan_name%` для отображения тега клана в табе, чате или над головой.
- **Полная кастомизация**: Все сообщения и форматы настраиваются в `config.yml`.

## Зависимости

- **(Обязательно)** [LuckPerms](https://luckperms.net/): Требуется для работы системы прав.
- **(Опционально)** [PlaceholderAPI](https://www.spigotmc.org/resources/placeholderapi.6245/): Требуется, если вы хотите использовать плейсхолдер `%clan_name%`.

## Установка

1.  Убедитесь, что на вашем сервере установлены все обязательные зависимости.
2.  Скачайте последнюю версию плагина `SimpleClans.jar`.
3.  Поместите `SimpleClans.jar` и `.jar` файлы зависимостей в папку `plugins` вашего сервера.
4.  Перезапустите сервер.

## Команды

| Команда | Описание | Права | Алиас |
| --- | --- | --- | --- |
| `/clan create <название>` | Создает новый клан. | `simpleclans.create` | `c` |
| `/clan disband` | Распускает ваш клан (только для владельца). | `simpleclans.use` | `c` |
| `/clan invite <игрок>` | Приглашает игрока в ваш клан. | `simpleclans.use` | `c` |
| `/clan join <название>` | Принимает приглашение в указанный клан. | `simpleclans.use` | `c` |
| `/clan deny <название>` | Отклоняет приглашение в указанный клан. | `simpleclans.use` | `c` |
| `/clan kick <игрок>` | Исключает игрока из вашего клана. | `simpleclans.use` | `c` |
| `/clan list` | Показывает список участников вашего клана. | `simpleclans.use` | `c` |
| `/clan chat [сообщение]` | Отправляет сообщение в клановый чат или переключает режим. | `simpleclans.use` | `c` |

## Права доступа (Permissions)

| Право | Описание | По умолчанию |
| --- | --- | --- |
| `simpleclans.use` | Дает доступ ко всем основным командам (`join`, `list`, `chat` и т.д.). | `true` (для всех) |
| `simpleclans.create` | Позволяет игроку создавать клан с помощью команды `/clan create`. | `op` (только для операторов) |

**Пример настройки прав в LuckPerms:**

Чтобы разрешить группе `sponsor` создавать кланы, используйте команду:
`lp group sponsor permission set simpleclans.create true`

## Плейсхолдеры (PlaceholderAPI)

Плагин регистрирует один плейсхолдер, который вы можете использовать в других плагинах (например, TAB, Chatty).

- `%clan_name%` - Отображает тег клана игрока.

**Пример использования в формате чата:**
`format: '%clan_name% %player_name%: %message%'`

## Конфигурация (`config.yml`)

```yaml
# Настройки базы данных
database:
  file: "clans.db"

# Настройки клана
clan:
  # Максимальное количество игроков в клане
  max-players: 15
  # Максимальная длина названия клана
  max-name-length: 16
  # Разрешен ли урон по членам своего клана?
  friendly-fire: false
  # Формат тега клана для PlaceholderAPI. Используйте %clan_name% для названия.
  tag-format: "&7[%clan_name%&7] "

# Настройки кланового чата
chat:
  # Формат сообщений в клановом чате.
  format: "&8[&bКлан&8] [%luckperms_prefix%] %player_name%: &f%message%"

# Сообщения (все сообщения можно перевести или изменить)
messages:
  clan-created: "&aКлан '%clan_name%&a' успешно создан!"
  clan-disbanded: "&cКлан '%clan_name%&a' был распущен."
  player-invited: "&aВы пригласили игрока %player_name% в клан."
  # ... и другие сообщения
```
